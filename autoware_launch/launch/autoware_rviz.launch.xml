<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="sensor_model" default = "aw_sensor_kit" description="sensor model name" />
  
  <arg name="rviz" default="true" description="launch rviz"/>
  <arg name="rviz_config" default="$(find-pkg-share autoware_launch)/rviz/autoware.rviz" description="rviz config"/>
  <!-- System -->
  <arg name="system_run_mode" default="online" description="run mode in system"/>
  <arg name="launch_system_monitor" default="false" description="launch system monitor"/>
  <arg name="launch_system" default="true" description="launch system"/>

  <group>
    <!-- Rviz -->
    <node pkg="rviz2" exec="rviz2" name="rviz2" output="screen" args="-d $(var rviz_config) -s $(find-pkg-share autoware_launch)/rviz/image/autoware.png" if="$(var rviz)"/>
  </group>

  <!-- System -->
  <group if="$(var launch_system)">
    <include file="$(find-pkg-share autoware_launch)/launch/components/tier4_system_component.launch.xml">
      <arg name="run_mode" value="$(var system_run_mode)"/>
      <arg name="launch_system_monitor" value="$(var launch_system_monitor)"/>
      <arg name="sensor_model" value="$(var sensor_model)"/>
    </include>
  </group>

  <!-- API -->
  <group>
    <include file="$(find-pkg-share tier4_autoware_api_launch)/launch/autoware_api.launch.xml"/>
  </group>

</launch>